(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f0e7d52"],{"00f8":function(t,s,e){},5914:function(t,s,e){"use strict";e("00f8")},a05c:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"account-container"},[s("div",{staticClass:"reset-title"},[s("span",{staticClass:"logo"}),s("span",[t._v(t._s(t.resetTitle))])]),2===t.resetStatus?s("section",[s("section",{staticClass:"reset-cotent"},[s("p",{staticClass:"center"},[t._v(" "+t._s(t.getTxt("login.reset2"))+" ")])]),""!=t.messageTip?s("section",{staticClass:"tip-container"},[s("div",{staticClass:"tip-content"},[s("span",[t._v(t._s(t.messageTip))])])]):t._e(),s("el-form",{ref:"resetForm2",staticClass:"form",attrs:{model:t.resetData,"label-position":"top",rules:t.rules}},[s("el-form-item",{attrs:{label:t.getTxt("login.password"),prop:"password"}},[s("div",{staticClass:"input-box flex"},[s("el-input",{staticClass:"global-query",attrs:{"show-password":""},on:{focus:function(s){t.passwordStatus=!0},blur:function(s){t.passwordStatus=!1}},model:{value:t.resetData.password,callback:function(s){t.$set(t.resetData,"password",s)},expression:"resetData.password"}}),s("span",{staticClass:"tip"},[t._v(t._s(t.getTxt("login.tips"))+" ")]),t.passwordStatus?s("div",{staticClass:"password-status"},[s("section",[s("span",[t.lengthMinStatus?s("i",{staticClass:"icon-check yes"}):s("i",{staticClass:"icon-close no"})]),s("span",[t._v(t._s(t.getTxt("login.min8"))+" ")])]),s("section",[s("span",[t.numberStatus?s("i",{staticClass:"icon-check yes"}):s("i",{staticClass:"icon-close no"})]),s("span",[t._v(t._s(t.getTxt("login.num1")))])]),s("section",[s("span",[t.letterStatus?s("i",{staticClass:"icon-check yes"}):s("i",{staticClass:"icon-close no"})]),s("span",[t._v(t._s(t.getTxt("login.letter1")))])]),s("section",[s("span",[t.lengthMaxStatus?s("i",{staticClass:"icon-check yes"}):s("i",{staticClass:"icon-close no"})]),s("span",[t._v(t._s(t.getTxt("login.max20")))])])]):t._e()],1)]),s("el-form-item",{staticStyle:{"margin-top":"25px"},attrs:{label:t.getTxt("login.passwordC"),prop:"confirmpassword"}},[s("div",{staticClass:"input-box flex"},[s("el-input",{staticClass:"global-query",attrs:{"show-password":""},model:{value:t.resetData.confirmpassword,callback:function(s){t.$set(t.resetData,"confirmpassword",s)},expression:"resetData.confirmpassword"}})],1)]),s("el-form-item",{staticStyle:{margin:"40px 0 10px"}},[s("template",{slot:"label"}),s("div",{staticClass:"input-box flex"},[s("div",{staticClass:"input-box show-data right cancel",on:{click:t.closePassword}},[t._v(" "+t._s(t.getTxt("login.cancel"))+" ")]),s("div",{staticClass:"input-box show-data left yes",on:{click:t.sendPassword}},[t.passwordLoading?s("i",{staticClass:"whatcoin-loading"}):t._e(),s("i",[t._v(t._s(t.getTxt("login.resetPassword")))])])])],2)],1)],1):t._e(),3===t.resetStatus?s("section",[s("div",{staticStyle:{padding:"60px 80px"}},[s("section",{staticClass:"valid-content"},[s("span",{staticClass:"valid-tip success"}),s("span",[t._v(t._s(t.getTxt("login.success")))])])]),s("div",{staticClass:"footer center"},[s("div",{staticClass:"input-box flex"},[s("div",{staticClass:"input-box show-data login",on:{click:t.loginSubmit}},[t.loginLoading?s("i",{staticClass:"whatcoin-loading"}):t._e(),s("i",[t._v(t._s(t.getTxt("login.login2")))])])])])]):t._e()])},i=[],o=(e("f693"),e("7736")),n=e("acf5"),r={name:"Accountreset",mixins:[n["a"]],data(){const t=(t,s,e)=>{""===s?e():s!==this.resetData.password?e(new Error("invalid password")):e()};return{title:"Hi, WhatsCoiner",contentText:"loading",resetStatus:0,passwordLoading:!1,loginLoading:!1,lengthMinStatus:!1,lengthMaxStatus:!1,numberStatus:!1,letterStatus:!1,passwordStatus:!1,messageTip:"",resetData:{mail:"",password:"",confirmpassword:""},redirect_url:localStorage.getItem("redirect_url")||"",secret:"",callback:"",rules:{mail:[{required:!0,message:"zh-cn"==localStorage.getItem("whatscoin:lang")?"请输入一个有效的邮箱地址":"Please enter a correct email address",trigger:"change"},{pattern:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,message:"zh-cn"==localStorage.getItem("whatscoin:lang")?"请输入一个有效的邮箱地址":"Please enter a correct email address",trigger:"change"}],password:[{required:!0,message:"zh-cn"==localStorage.getItem("whatscoin:lang")?"密码格式错误":"Password with wrong format",trigger:"change"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,20}$/,message:"zh-cn"==localStorage.getItem("whatscoin:lang")?"密码格式错误":"Password with wrong format",trigger:"change"}],confirmpassword:[{required:!0,message:"zh-cn"==localStorage.getItem("whatscoin:lang")?"输入有效的密码":"Input valid password",trigger:"change"},{validator:t,trigger:"change"}]}}},created(){if(this.$route&&this.$route.query)if(this.$route.query.secret&&this.$route.query.callback){let t=this.$route.query.secret,s=this.$route.query.callback;this.resetPwAndConfirmPw(t,s)}else location.href=""+location.origin},watch:{"resetData.password":{deep:!0,immediate:!0,handler(t){t&&(this.passwordStatus=!0),this.changeStatus(t)}}},mounted(){},computed:{...Object(o["b"])("common",["lang"]),resetTitle(){return 1===this.resetStatus?"zh-cn"==this.lang?"密码重置邮件已发送":"Password reset email sent":3===this.resetStatus?"zh-cn"==this.lang?"重置成功":"Reset Successfully":"zh-cn"==this.lang?"重置密码":"Reset Password"}},beforeDestroy(){},methods:{linkResetStatus(t){this.resetStatus=t},resetPwAndConfirmPw(t,s){this.secret=t,this.callback=s,this.linkResetStatus(2)},closePassword(){this.passwordLoading=!1,localStorage.getItem("userinfo")&&localStorage.getItem("cloud_token")?location.href=""+(location.origin+"/account-setting"):location.href=""+location.origin},sendPassword(){this.$refs["resetForm2"].validate(t=>{t&&(this.passwordLoading=!0,this.confirmSubmitPw())})},async confirmSubmitPw(){if(!this.secret||!this.callback)return;const{success:t,data:s,code:e,message:a}=await this.$api.userInfo.resetPw({secret:this.secret,callback:this.callback,security:this.resetData.password,confirm:this.resetData.confirmpassword});this.passwordLoading=!1,"00000"==e?(this.resetStatus=3,this.messageTip="",setTimeout(()=>{let t=localStorage.getItem("redirect_url")||location.origin;location.href=""+(t+"?login=1")},3e3)):this.messageTip=a},loginSubmit(){this.loginLoading=!0,setTimeout(()=>{let t=localStorage.getItem("redirect_url")||location.origin;location.href=""+(t+"?login=1")},1e3)},changeStatus(t){let s=new RegExp(/\d/g),e=new RegExp(/[a-zA-Z]/g);t?(this.lengthMinStatus=t.length>=8,this.lengthMaxStatus=t.length<=20,this.numberStatus=s.test(t),this.letterStatus=e.test(t)):(this.lengthMinStatus=!1,this.lengthMaxStatus=!1,this.numberStatus=!1,this.letterStatus=!1)}}},l=r,c=(e("5914"),e("e607")),g=Object(c["a"])(l,a,i,!1,null,"24a9a410",null);s["default"]=g.exports}}]);