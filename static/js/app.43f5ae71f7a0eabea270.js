webpackJsonp([1],{0:function(t,e){},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"8Y90":function(t,e){},BMXL:function(t,e){},GlBA:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=i("VU/8")({name:"App"},s,!1,function(t){i("Pe99")},null,null).exports,r=i("/ocq"),o=i("iwQb");if("server"!==Object({NODE_ENV:"production"}).VUE_ENV){var l=i("ytml").default,c=i("DupL");if("undefined"!=typeof window&&"Worker"in window&&-1===navigator.appVersion.indexOf("MSIE 10")){var u=i("Mpk9");c.GlobalWorkerOptions.workerPort=new u}var h=Object(o.a)(l(c))}else h=Object(o.a)({});var f=h;var d=i("VU/8")(f,null,!1,function(t){i("xxT8")},null,null).exports,m=i("rxKx"),p=i.n(m),g={data:function(){return{url:"",numPages:1,imgSrc:"",config:{},id:null,mc:null,translateX:0,translateY:0,scale:1,firstTouch:!0,relateX:0,relateY:0,oldX:0,oldY:0,oldScale:1}},components:{pdf:d},methods:{getDatas:function(){window.confirm("预览")&&this.$store.state.pdf&&this.$router.push("/preview");var t=document.querySelector(".img"),e=window.getComputedStyle(t,null),i=(e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform")||"FAIL").split("(")[1].split(")")[0].split(","),n=i[0],s=i[1],a=Math.sqrt(n*n+s*s),r="touch-action: none; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); transform: translate3d("+i[4]+"px, "+i[5]+"px, 0px) scale("+a+", "+a+");";this.$store.commit("matrixChange",i),this.$store.commit("styleChange",r)},selectFile:function(t){var e=this;if(t.target.files&&t.target.files.length>0){var i=t.target.files[0],n=new FileReader;n.readAsDataURL(i),n.onload=function(t){var i=new Image;i.src=t.target.result,i.onload=function(i){e.imgSrc=t.target.result,e.$store.commit("imgChange",t.target.result),e.$nextTick(function(){e.init()})}}}},fileChange:function(t){var e=this,i="",n=t.target.files[0];this.$store.commit("evPdfChange",n);var s=new FileReader;s.readAsDataURL(n),s.onload=function(t){i=t.target.result,e.$store.commit("pdfChange",t.target.result),e.getNumPages(i)}},getNumPages:function(t){var e=this,i=d.createLoadingTask(t);i.promise.then(function(t){e.url=i,e.numPages=t.numPages}).catch(function(){console.error("pdf加载失败")})},init:function(){this.picInit()},picInit:function(){this.id=document.querySelector(".img"),this.mc=new p.a(this.id),this.relateX=0,this.relateY=0,this.mc.add(new p.a.Pan({direction:p.a.DIRECTION_ALL,threshold:0,pointers:0})),this.mc.add(new p.a.Pinch({threshold:0})).recognizeWith(this.mc.get("pan")),this.mc.on("hammer.input",this.isFinal),this.mc.on("panstart panmove",this.onPan),this.mc.on("pinchstart pinchmove",this.onPinch),this.setPosition()},isFinal:function(t){t.isFinal&&(this.oldX=this.translateX,this.oldY=this.translateY,this.oldScale=this.scale)},setPosition:function(){this.selfPosition({translateX:this.relateX,translateY:this.relateY,scale:this.scale})},onPan:function(t){this.firstTouch&&(this.oldX=this.relateX,this.oldY=this.relateY),this.translateX=this.oldX+t.deltaX,this.translateY=this.oldY+t.deltaY;var e={translateX:this.translateX,translateY:this.translateY,scale:this.scale};this.selfPosition(e),this.firstTouch=!1},onPinch:function(t){this.scale=this.oldScale*t.scale,this.selfPosition({translateX:this.translateX,translateY:this.translateY,scale:this.scale})},selfPosition:function(t){var e=this;return this.picAnimate()(function(){return e.tempPos(t)})},tempPos:function(t){var e=["translate3d("+t.translateX+"px, "+t.translateY+"px, 0)","scale("+t.scale+", "+t.scale+")"];e=e.join(" "),this.id.style.transform=e},picAnimate:function(){return window[p.a.prefixed(window,"requestAnimationFrame")]||function(t){setTimeout(t,1e3/60)}}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"main"},[i("div",{ref:"pdf",staticClass:"mian"},[t._l(t.numPages,function(e){return i("pdf",{key:e,attrs:{src:t.url,page:e}})}),t._v(" "),i("div",{staticClass:"demo"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.imgSrc,expression:"imgSrc"}],ref:"img",staticClass:"img",attrs:{src:t.imgSrc}})])],2),t._v(" "),t.url?t._e():i("div",[t._v("\n      上传PDF:"),i("input",{attrs:{type:"file",id:"files",accept:"application/pdf",value:"上传PDF"},on:{change:t.fileChange}})]),t._v(" "),t.imgSrc?t._e():i("div",[t._v("\n      上传签名:"),i("input",{attrs:{type:"file",accept:"image/*",value:"上传签名"},on:{change:t.selectFile}})])]),t._v(" "),i("div",{staticStyle:{padding:"100px 0"}},[i("button",{on:{click:t.getDatas}},[t._v("预览")])])])},staticRenderFns:[]};var w=i("VU/8")(g,v,!1,function(t){i("BMXL")},"data-v-310c1961",null).exports,P={data:function(){return{url:"",numPages:1,imgSrc:""}},components:{pdf:d},mounted:function(){var t=this;document.documentElement.scrollTop=0,setTimeout(function(){if(t.$store.state.evPdf){var e=t.$store.state.evPdf,i=new FileReader;i.readAsDataURL(e),i.onload=function(e){t.getNumPages(e.target.result)}}})},methods:{getNumPages:function(t){var e=this,i=d.createLoadingTask(t);i.promise.then(function(t){e.url=i,console.log("loadingTask:",i),e.numPages=t.numPages,e.imgSrc=e.$store.state.img,e.$nextTick(function(){document.querySelector(".img").style=e.$store.state.style})}).catch(function(){console.error("pdf加载失败")})}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"main"},[i("div",{ref:"pdf",staticClass:"mian"},[t._l(t.numPages,function(e){return i("pdf",{key:e,attrs:{src:t.url,page:e}})}),t._v(" "),i("div",{staticClass:"demo"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.imgSrc,expression:"imgSrc"}],ref:"img",staticClass:"img",attrs:{src:t.imgSrc}})])],2)])])},staticRenderFns:[]};var x=i("VU/8")(P,y,!1,function(t){i("GlBA")},"data-v-0af61fea",null).exports;n.a.use(r.a);var $=new r.a({routes:[{path:"/",name:"Home",component:w},{path:"/preview",name:"Preview",component:x}]}),C=i("NYxO");n.a.use(C.a);var S=new C.a.Store({state:{pdf:null,evPdf:null,img:null,evImg:null,matrix:null,style:""},mutations:{pdfChange:function(t,e){t.pdf=e},evPdfChange:function(t,e){t.evPdf=e},imgChange:function(t,e){t.img=e},evImgChange:function(t,e){t.evImg=e},matrixChange:function(t,e){t.matrix=e},styleChange:function(t,e){t.style=e},clear:function(t){t.pdf=null,t.evPdf=null,t.img=null,t.evImg=null,t.matrix=null,t.style=""}}});n.a.config.productionTip=!1,new n.a({el:"#app",router:$,store:S,components:{App:a},template:"<App/>"})},POKh:function(t,e,i){"use strict";var n={props:{initial:{type:Boolean,default:!1}},data:function(){return{size:{width:-1,height:-1}}},methods:{reset:function(){var t=this.$el.firstChild,e=this.$el.lastChild;t.scrollLeft=1e5,t.scrollTop=1e5,e.scrollLeft=1e5,e.scrollTop=1e5},update:function(){this.size.width=this.$el.offsetWidth,this.size.height=this.$el.offsetHeight}},watch:{size:{deep:!0,handler:function(t){this.reset(),this.$emit("resize",{width:this.size.width,height:this.size.height})}}},render:function(t){var e="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",i="position: absolute; left: 0; top: 0;";return t("div",{style:e+"animation-name: resizeSensorVisibility;",on:{"~animationstart":this.update}},[t("div",{style:e,on:{scroll:this.update}},[t("div",{style:i+"width: 100000px; height: 100000px;"})]),t("div",{style:e,on:{scroll:this.update}},[t("div",{style:i+"width: 200%; height: 200%;"})])])},beforeDestroy:function(){this.$emit("resize",{width:0,height:0}),this.$emit("resizeSensorBeforeDestroy")},mounted:function(){if(!0===this.initial&&this.$nextTick(this.update),this.$el.offsetParent!==this.$el.parentNode&&(this.$el.parentNode.style.position="relative"),"attachEvent"in this.$el&&!("AnimationEvent"in window)){var t=function(){this.update(),e()}.bind(this),e=function(){this.$el.detachEvent("onresize",t),this.$off("resizeSensorBeforeDestroy",e)}.bind(this);this.$el.attachEvent("onresize",t),this.$on("resizeSensorBeforeDestroy",e),this.reset()}}};var s=i("VU/8")(n,null,!1,function(t){i("8Y90")},null,null);e.a=s.exports},Pe99:function(t,e){},xxT8:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.43f5ae71f7a0eabea270.js.map