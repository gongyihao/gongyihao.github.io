<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>柱状图滚动条</title>
  <style scoped>
    .charts {
      width: 100%;
      height: 300px;
    }
  </style>
</head>
<body>
  <div>
    <canvas id="urDOswjXpArRtehSVwnebLFxdZMNEzLD" class="charts"></canvas>
  </div>
</body>
<script src="./u-charts.min.js"></script>
<script language="JavaScript">
var uChartsInstance = {};

function showCharts(id,data){
  const canvas = document.getElementById(id);
  const ctx = canvas.getContext("2d");
  canvas.width = canvas.offsetWidth;
  canvas.height = canvas.offsetHeight;
  uChartsInstance[id] = new uCharts({
    type: "column",
    context: ctx,
    width: canvas.width,
    height: canvas.height,
    categories: data.categories,
    series: data.series,
    animation: true,
    background: "#FFFFFF",
    color: ["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],
    padding: [15,15,0,5],
    touchMoveLimit: 24,
    enableScroll: true,
    legend: {},
    xAxis: {
      disableGrid: true,
      scrollShow: true,
      itemCount: 4
    },
    yAxis: {
      data: [
        {
          min: 0
        }
      ]
    },
    extra: {
      column: {
        type: "group",
        width: 30,
        activeBgColor: "#000000",
        activeBgOpacity: 0.08
      }
    }
  });
  canvas.onmousedown = function(e) {
    uChartsInstance[e.target.id].scrollStart(getH5Offset(e));
    canvas.onmousemove = function(e) {
      uChartsInstance[e.target.id].scroll(getH5Offset(e));
    };
  };
  canvas.onmouseup=function(e) {
    uChartsInstance[e.target.id].scrollEnd(getH5Offset(e));
    uChartsInstance[e.target.id].touchLegend(getH5Offset(e));
    uChartsInstance[e.target.id].showToolTip(getH5Offset(e));
    canvas.onmousemove = null;
  };
}

function getServerData() {
  //模拟从服务器获取数据时的延时
  setTimeout(() => {
    //模拟服务器返回数据，如果数据格式和标准格式不同，需自行按下面的格式拼接
    let res = {
        categories: ["2018","2019","2020","2021","2022","2023"],
        series: [
          {
            name: "目标值",
            data: [35,36,31,33,13,34]
          },
          {
            name: "完成量",
            data: [18,27,21,24,6,28]
          }
        ]
      };
    showCharts('urDOswjXpArRtehSVwnebLFxdZMNEzLD', res);
  }, 500);
}

getServerData();
</script>
</html>